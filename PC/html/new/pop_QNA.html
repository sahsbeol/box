<!DOCTYPE html PUBLIC "-//W3C//DTDXHTML1.0Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta http-equiv="Content-Script-Type" content="text/javascript">
        <meta http-equiv="Content-Style-Type" content="text/css">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=950">
        <title>HOTTRACKS - 생활 속 감성충전소</title>
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css">
        <link href="../../images/biz/common/favicon.ico" rel="shortcut icon">
        <link rel="stylesheet" type="text/css" href="../../css/common.css">
        <link rel="stylesheet" type="text/css" href="../../css/layout.css">
        <link rel="stylesheet" type="text/css" href="../../css/contents.css">
        <link rel="stylesheet" type="text/css" href="../../css/biz/common_v2.css">
        <link rel="stylesheet" type="text/css" href="../../css/biz/hottweb_yj.css">
        <link rel="stylesheet" type="text/css" href="../../css/biz/slick.css">
        <link rel="stylesheet" type="text/css" href="../..//css/shop.css">
        <!-- 20.12.28 -->
        <link rel="stylesheet" type="text/css" href="../../css/new/orderandpay.css">
        <script type="text/javascript" src="../../js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="../../scripts/common.js"></script>



<style type="text/css">
label#content_pre { position: absolute;top: 504px; left: 117px; z-index:-1;}
label#content_pre + textarea{background-color:transparent; width:367px;height:100px;}
</style>
<script type="text/javascript" src="/js/jquery-1.4.2.min.js" charset="utf-8"></script>
<script type="text/javascript" src="/js/jquery.form.js"></script>
<script type="text/javascript">
jQuery(function($) {
    $(document).ready(function(){
        window.resizeTo(518, 825);
        if($("label#content_pre + textarea").val()!="")
            $("label#content_pre").hide();
        else
        	$("label#content_pre").show();
    });
    
    var urlStr = "/ht/product/saveQuestion";
    var titleVal;
    var contentVal;
    var publicYnVal;
    var userNameVal;
    var userEmailVal;
    
    var  errorMessages = {title:"제목을 적어 주세요"
        , userName:"이름을 적어 주세요"
        , userEmail:"이메일을 적어 주세요"
        , content:"내용을 적어 주세요"
        , emailFormat:"이메일 형식을 확인하세요"
        , publicYn:"공개여부를체크해주세요"};
    
    String.prototype.getByteSize = function(){
        var str = this;
        var strlength = str.length;
        var size = 0;
        for(var i = 0 ; i < strlength ; i++)
            size += 1;
        
        return size;
    };
    
    function loadParamAlert(){
        var errorMessageStr = "";
        var haveError = true;
        for(key in errorMessages)
            errorMessageStr += errorMessages[key] +"\n";
        
        if(errorMessageStr !== ""){
            alert(errorMessageStr);
            haveError = true;
        }else{
            haveError = false;
        };
        return haveError;    
    };
    
    function deleteErrorMessage(Boolean, keyVal){
        if(eval(Boolean))
            delete errorMessages[keyVal];    
    };
    
    function checkStrLength(object){
        var size = object.val().getByteSize();
        var isTrue = (size !== 0);
        var key = object.attr("name");
        
        deleteErrorMessage(isTrue, key);
    };
    
    function checkSelected(object){
        var isTrue = object.attr("checked");
        var key = object.attr("name");
        
        deleteErrorMessage(isTrue, key);
    };
    function checkEmailFormat(object){
        var regExp = /^[_a-zA-Z0-9-]+(.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(.[a-zA-Z0-9-]+)*$/;
        var emailStr = object.val();
        var isTrue = regExp.test(emailStr);
        var key = "emailFormat";
        
        deleteErrorMessage(isTrue , key);
    };
    
    function checkRadio(){
        $(" :radio").each(function(){
            var $radio = $(this);
            checkSelected($radio);
        });
    };    
    
    function checkTexts(){
        $(" input[type='text']").each(function(){
            var $inputText = $(this);
            checkStrLength($inputText);
        });
        checkStrLength($("textArea"));
        checkEmailFormat($("#inputEmail"));
    }
    
    function reloadNCloseWindow(){
        parent.opener.loadQuestionSubList();
        self.close();
    }
    
    function ajaxSuccessHandler(result){
        if(result){
            var isSuccss         = result.isSuccess;
            var errorMessages     = result.errorMessages;
            if(isSuccss){
                reloadNCloseWindow();
            }else{
                var messageStr ="";
                for(var i=0; i<errorMessages.length; i++){
                    messageStr += errorMessages[i] + "\n";
                }
                alert(messageStr);
            }    
        }
    }
    
    function ajaxErrorHandler(result){
        alert('시스템 오류가 발생 했습니다. 관리자에게 문의 하세요.');
    }
    
    function setQuestionWithAjax(){
        $.ajax({
            type: "POST"
              ,url: urlStr
              ,dataType: "json"
              ,data:{barcode        :"2310041272549"
                  , title                :titleVal
                  , content            :contentVal
                  , publicYn            :publicYnVal
                  , seq                :"273663"
                  , userName            :userNameVal
                  , userEmail            :userEmailVal
                  , grade                :"0"
              }
            ,success : ajaxSuccessHandler
            ,error : ajaxErrorHandler
       });
    }
    
    function setParams4Ajax(){
        titleVal         = $("input[name='title']").val();
        contentVal         = $("textArea").val();
        publicYnVal        = $("[name=publicYn]:checked").val();
        userNameVal     = $("input[name='userName']").val();
        userEmailVal     = $("input[name='userEmail']").val();
    }
    function checkParams(){ 
        checkTexts();
        checkRadio();
        var haveError = loadParamAlert();
        if(haveError){
            errorMessages = {title:"제목을 적어 주세요"
                , userName:"이름을 적어 주세요"
                , userEmail:"이메일을 적어 주세요"
                , content:"내용을 적어 주세요"
                , emailFormat:"이메일 형식을 확인하세요"
                , publicYn:"공개여부를체크해주세요"};
        }else{
            setParams4Ajax();
            setQuestionWithAjax();
        }
    };
    
    function addEvent(){
        $("#imgSaveQuestion").bind("click",checkParams);
    };
    
    function setForm4Modify(){
        if(eval("true")){
            urlStr = "/ht/product/modifyQuestion";
        }
    }
    setForm4Modify();
    addEvent();
    
    
});
function changePre(i){
    if(i==2)
        $("label#content_pre").hide();
    else{
        if($("label#content_pre + textarea").val()=="")
              $("label#content_pre").show();
    }
}

</script>


</head>
<!-- 201228 S : 작업부분 body에 class="orderandpay" 넣어주세요  -->
<body class="popup orderandpay ">
    <div class="tooltip_wrap active">
        <div class="tooltip_inner">
            <p class="tooltip_tit">상품 Q&amp;A</p>
            <div class="pop_cont">
                <ul class="list_type02_v2">
                    <li>상품관련 문의에 대해서만 답변 받으실수 있습니다.</li>
                    <li>주문/배송/교환/환불 등 쇼핑몰 사용에 관한 문의시 임의적으로 SOS상담쪽으로 이관되어 답변 확인이 되실수 있습니다.</li>
                    <li>아래 [고객센터 바로가기]를 이용부탁드립니다.</li>
                </ul>
                <div>
                    <a href="javascript:parent.opener.location.href ='/ht/help/createCounselForm';self.close();" class="btn_type05_v3 mgt10"><span>고객센터 바로가기</span></a>
                </div>
                <p class="point02 mgt15">상품관련 문의가 아닐 경우 고객님 문의하신 내용은 마이핫트랙스 &gt; sos 상담에서 확인 가능합니다.</p>
                <!-- <div class="pop_txt_wrap">
                    상품관련 문의에 대해서만 답변 받으실수 있습니다.<br />
                    주문/배송/교환/환불 등 쇼핑몰 사용에 관한 문의시 임의적으로 SOS상담쪽으로 이관되어 답변 확인이 되실수 있습니다.<br />
                    아래 [고객센터 바로가기]를 이용부탁드립니다.<br />
                    <a href="javascript:parent.opener.location.href ='/ht/help/createCounselForm';self.close();" class="btn_type10 mgt10"><span>고객센터 바로가기</span></a>
                    <p class="point02 mgt15">상품관련 문의가 아닐 경우 고객님 문의하신 내용은 마이핫트랙스 &gt; sos 상담에서 확인 가능합니다.</p>
                </div> -->
            
                <form id="form" action="">
                    <table class="table02_v1 mgt10">
                        <caption>상품 Q&amp;A 쓰기</caption>
                        <colgroup>
                            <col style="width:140px" />
                            <col style="width:*" />
                        </colgroup>
                        <tbody>
                            <tr>
                                <th>상품</th>
                                <td>
                                    <div class="p_qna">
                                        <span class="thum">
                                            <img src="http://image.kyobobook.co.kr/newimages/giftshop_new/goods/100/1698/hot1583919332400.jpg" alt="러브미모어Imgs" width="100" height="100" onerror="this.src='http://image.kyobobook.co.kr/images/no_image.gif';"/>
                                        </span>
                                        <span class="company">러브미모어</span>
                                        <span class="name">러브미모어X핫트랙스 스티커 세트</span>
                                        <strong class="price">3,000 원</strong>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>제목</th>
                                <td>
                                    <div class="input_wrap">
                                        <input type="text" name="title" value="1장에 몇개의 스티커가 들어가 있나요?" class="width100" title="제목입력" />
                                    </div>                                    
                                </td>
                            </tr>
                            <tr>
                                <th>작성자</th>
                                <td>
                                    <div class="input_wrap">                             
                                        <input type="text" name="userName" value="mssea820" class="width100" title="작성자입력" readonly/>
                                    </div>       
                                </td>
                            </tr>
                            <tr>
                                <th>이메일</th>
                                <td>
                                    <div class="input_wrap">                             
                                        <input type="text" id="inputEmail" name="userEmail" value="mssea820@gmail.com" class="width100" title="이메일입력" />
                                    </div>                                      
                                </td>
                            </tr>
                            <tr>
                                <th>문의내용</th>
                                <td>
                                    <label id="content_pre">주문 후 주문/배송/취소/환불 등에 관한 문의는<br/>
                                        '마이핫트랙스&lt;SOS상담'을 이용해주시기 바랍니다.<br/><br/>
                                        상품문의 외 주문/배송/취소/환불 등의 문의를 남겨주시면 빠른 <br/>
                                        안내가 어렵습니다.
                                    </label>
                                    <div class="input_wrap">
                                        <textarea id="content" name="content" rows="" cols=""  onchange="changePre(1);" onclick="changePre(2);">1장에 몇개의 스티커가 들어가 있나요?        혹시 5장에 스티커 갯수가 모두 다르다면 몇개인지 알고 싶어요.</textarea>
                                    </div> 
                                </td>
                            </tr>
                            <tr>
                                <th>공개여부</th>
                                <td>
                                    <div class="choice_wrap">
                                        <span class="choice_wrap_inner">
                                            <input type="radio" name="publicYn" value="Y"  id="tit1" /> 
                                            <label for="tit1">공개</label>
                                        </span>
                                        <span class="choice_wrap_inner">
                                            <input type="radio" name="publicYn" value="N" checked="checked" name="tit" id="tit2" /> 
                                            <label for="tit2" class="mgl10">비공개</label>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="btn_area t_center mgt40">
                        <a href="#n" id="imgSaveQuestion" class="btn_type04_v1">글올리기</a>
                        <a href="javascript://" onclick="self.close()" class="btn_type04_v2 mgl10">취소</a>
                    </div>
                </form>
            </div>
        </div>
        <a href="javascript:;" class="tooltip_close">닫기</a>
    </div>
</body>
</html>