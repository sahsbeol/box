<%@ page contentType="text/html;charset=utf-8" language="java" pageEncoding="UTF-8"%>
<!-- 태그 라이브러리 -->
<%@ include file="/pages/decorators/biz/tagHeader.jsp" %>

<!-- 데코레이터에 있는 #container 요소에 클래스를 추가하기 위해 -->
<meta name="container" content="product"/>

<!--  SNS 공유 내용 -->
<meta property="og:type" content="website"/>
<meta property="og:title" content="${brand.brandEngName}"/>
<meta property="og:url" content="${defaultHost}/ht/biz/hot/brandDetail?brandId=${brand.brandId}"/>
<meta property="og:image" content="http://image.kyobobook.co.kr/newimages/giftshop_new/common/images/renewal/common/logo_over.gif"/>
<!--  SNS 공유 내용 -->

<script type="text/javascript">
	$(document).ready(function(){
		obj.init();
	});
	
	var obj = {
		 swiper : null
		,init : function(){			
			$("img.lazy").lazyload({placeholder:'/images/no_image2.gif',threshold:200});
			
		    $(".pagination a").click(function(e){
		        e.preventDefault();
		        location.href = $(this).attr("href") + "#pd_list";
		    });
 
			$('.tit_like .btn_like').unbind('click');

			categoryFn();
			
			var eventCls = "";
			if($("#eventArea").length > 0){
				eventCls = ($("#eventArea").attr("class")).replace(" clear", "");
				$(".brShop_wrap").addClass(eventCls);
				
				if(eventCls == "case3"){
					bradnSlider();
				}
			}
		}
	};
</script>

<div class='bg_brand'><!-- 브랜드 상단 배경 -->
	<div class="topTit_brand clear">
		<div class="tit_round<c:if test='${not empty brand.brandImageC0292}'> img</c:if>"><!-- 이미지가 있으면, tit_round에 img : class 추가 -->
			<c:if test='${not empty brand.brandImageC0292}'>
				<ui:image src="${brand.brandImageC0292}" server="brand" alt="${brand.brandName}"/>
			</c:if>
		</div>
		<div class="tit_brand">
			<h2 class='brand_en'>${brand.brandEngName}</h2>
			<p class='h2_line'></p>
			<h3 class='brand_ko'>${brand.brandName}</h3>
			<p class='h3_line'></p>
		</div>
		<div class="tit_text">
			<p>
				${brand.brandDesc}
			</p>
		</div>
		<div class="tit_like">
			<a href="javascript:" id="${brand.brandId}" onclick="addBizWishBrand('${brand.brandId}')" class='btn_like<c:if test="${brand.wishUserBrandCnt ne '0'}"> on</c:if>'><!-- 활성화시 on : class 추가 -->
				<i></i>
				<c:set var="wishBrandCnt" value="${brand.wishBrandCnt}"/>
				<c:if test="${brand.wishBrandCnt > 999}"><c:set var="wishBrandCnt" value="999+"/></c:if>
				<span class='font_t brandTxt' code="${brand.brandId}">${wishBrandCnt}</span>
			</a>
		</div>
	</div>
</div><!-- //브랜드 상단 배경 -->

<div class="brShop_wrap category_wrap"><!-- 브랜드 이미지 개수별 case1 ~ 3 -->
	<!-- //////이벤트 영역////// -->
	<c:if test="${not empty eventList}">
		<c:choose>
			<c:when test="${fn:length(eventList) == 1}">
				<c:set var="l" value="${eventList[0]}"/>
				<div id="eventArea" class="case1 clear">
					<div class='img_inner'>
						<a href="/ht/biz/eventDetail?eventId=${l.eventId}">
							<ui:image src="${l.imageUrl}" alt="${l.eventTitle}"/>
						</a>
					</div>
					<div class="txt_inner">
						<c:if test="${not empty l.discRate && l.discRate > 0}">
							<span class='font_t percent'>${l.discRate}%</span>
						</c:if>
						<strong>${l.eventTitle}</strong>
						<p>${l.eventDtlCont}</p>
						<a href="/ht/biz/eventDetail?eventId=${l.eventId}"></a>
					</div>
				</div>
			</c:when>
			<c:when test="${fn:length(eventList) == 2}">
				<div id="eventArea" class="case2 clear">
					<ul class='list_brand clear'>
						<c:forEach items="${eventList}" var="l">
							<li>
								<div class='img_inner'>
									<ui:image src="${l.imageUrl}" alt="${l.eventTitle}"/>
									<c:if test="${not empty l.discRate && l.discRate > 0}">
										<span class='font_t percent'>${l.discRate}%</span>
									</c:if>
								</div>
								<strong>${l.eventTitle}</strong>
								<p>${l.eventDtlCont}</p>
								<a href="/ht/biz/eventDetail?eventId=${l.eventId}"></a>
							</li>
						</c:forEach>
					</ul>
				</div>
			</c:when>
			<c:otherwise>
				<div id="eventArea" class="case3 clear">
					<div class="brand_slider">
						<ul>
							<c:forEach items="${eventList}" var="l">
								<li>
									<ui:image src="${l.imageUrl}" alt="${l.eventTitle}"/>
									<div class="brand_text">
										<c:if test="${not empty l.discRate && l.discRate > 0}">
											<span class='font_t percent'>${l.discRate}%</span>
										</c:if>
										<strong>${l.eventTitle}</strong>
										<p>${l.eventDtlCont}</p>
									</div>
									<a href="/ht/biz/eventDetail?eventId=${l.eventId}"></a>
								</li>
							</c:forEach>
						</ul>
					</div>
				</div>
			</c:otherwise>
		</c:choose>		
	</c:if>

	<!-- 판매베스트 -->
	<c:if test="${not empty listBestProduct}">
		<div class="best_selling">
			<h2 class='tit_sell'>판매베스트</h2>
			<!-- 상품 -->
			<div class="pd_list">
				<ul>
					<!-- prod -->
					<c:import url="/pages/bizFront/template/bizLayerProduct.jsp" charEncoding="UTF-8">
						<c:param name="paramList" value="listBestProduct"/>
						<c:param name="imgRound" value="Y"/>
					</c:import>
					<!-- //prod -->
				</ul>
			</div>
			<!-- //상품 -->
		</div>
	</c:if>
	
	<!-- 항목분류 -->
	<div class="sortItem_wrap" id="pd_list">
		<ul class='list_sortItem clear'>
			<c:forEach items="${listPrdtCntByCtgr}" var="l">
				<li<c:if test="${c.ctgrId eq l.ctgrId || (c.ctgrId eq '00'&& empty l.ctgrId)}"> class="active"</c:if>>
                    <a href="?brandId=${brand.brandId}&page=1&productOrderBy=${c.productOrderBy}&productListType=${c.productListType}&listSize=${c.listSize}&ctgrId=${l.ctgrId}#pd_list">${l.ctgrName}(<fmt:formatNumber value="${l.productCnt}" type="number"/>)</a>
                </li>
			</c:forEach>
			<c:set var="len" value="0"/>
			<c:choose>
				<c:when test="${fn:length(listPrdtCntByCtgr) < 5}">
					<c:set var="len" value="${5 - (fn:length(listPrdtCntByCtgr))}"/>
				</c:when>
				<c:when test="${(fn:length(listPrdtCntByCtgr) % 5) > 0 }">
					<c:set var="len" value="${5 - (fn:length(listPrdtCntByCtgr) % 5)}"/>
				</c:when>
			</c:choose>
			<c:forEach var="i" begin="1" end="${len}">				
			    <li><a href="javascript:"></a></li>
			</c:forEach>
		</ul>
	</div>

	<div class="pd_filter">
		<div class="tag_list">
			<c:set var="orderLink" value="?brandId=${brand.brandId}&ctgrId=${c.ctgrId}&page=1&productListType=${c.productListType}&listSize=${c.listSize}"/>
			<ul>
				<li>
					<label class="form_checkbox">						
						<input type="checkbox" value="R" <c:if test="${c.productOrderBy eq 'R'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">신상품순</span>
					</label>
				</li>
				<li>
					<label class="form_checkbox">
						<input type="checkbox" value="P" <c:if test="${c.productOrderBy eq 'P'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">판매량순</span>
					</label>
				</li>
				<li>
					<label class="form_checkbox">
						<input type="checkbox" value="L" <c:if test="${c.productOrderBy eq 'L'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">낮은가격순</span>
					</label>
				</li>
				<li>
					<label class="form_checkbox">
						<input type="checkbox" value="H" <c:if test="${c.productOrderBy eq 'H'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">높은가격순</span>
					</label>
				</li>
				<li>
					<label class="form_checkbox">
						<input type="checkbox" value="T" <c:if test="${c.productOrderBy eq 'T'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">높은할인율순</span>
					</label>
				</li>
				<li>
					<label class="form_checkbox">
						<input type="checkbox" value="W" <c:if test="${c.productOrderBy eq 'W'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">좋아요순</span>
					</label>
				</li>
				<li>
					<label class="form_checkbox">
						<input type="checkbox" value="C" <c:if test="${c.productOrderBy eq 'C'}"> checked="true"</c:if> onclick="$('.tag_list [type=checkbox]').not('[value='+this.value+']').attr('checked', false);location.href='${orderLink}&productOrderBy='+this.value+'#pd_list';">
						<span class="icon">리뷰순</span>
					</label>
				</li>
			</ul>
		</div>
	</div>
	
	<div class="pd_list">
		<ul>
			<!-- prod -->
			<c:import url="/pages/bizFront/template/bizLayerProduct.jsp" charEncoding="UTF-8">
				<c:param name="paramList" value="listProduct"/>
			</c:import>
			<!-- //prod -->
		</ul>
	</div>

	<!-- pagination -->
	<div class="pagination_v2">	        	   
 		<ui:bizPagination name="pageHolder" url="?" parameters="brandId,ctgrId,productOrderBy,productListType,listSize,listLine,saleYn"/>
	</div>	
	<!--// pagination -->
</div>